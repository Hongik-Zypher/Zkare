# Zkare 의료기록 관리 시스템 데모 플랜

## 📋 데모 개요

- **시스템명**: Zkare - 블록체인 기반 암호화 의료기록 관리 시스템
- **데모 소요 시간**: 15-20분
- **주요 특징**:
  - IPFS를 활용한 분산 저장
  - AES-256-GCM + RSA-OAEP 하이브리드 암호화
  - 블록체인 기반 무결성 검증
  - Shamir's Secret Sharing 기반 키 복구

---

## 🔧 사전 준비 사항

### 1. 하드웨어/소프트웨어

- ✅ Hardhat 노드 실행 중 (`npx hardhat node`)
- ✅ MetaMask 연결 및 로컬 네트워크 설정 (localhost:8545, Chain ID: 31337)
- ✅ 프론트엔드 실행 중 (`npm start`)
- ✅ Pinata 계정 및 JWT 토큰 설정 완료

### 2. 계정 준비

- **의사 계정**: `0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266` (배포자 계정, 이미 의사로 등록됨)
- **환자 계정**: Hardhat 노드의 다른 계정 중 하나 선택 (예: `0x70997970C51812dc3A010C7d01b50e0d17dc79C8`)

### 3. 테스트 데이터

- 환자 기본 정보 (키, 몸무게, 혈액형, 주민번호)
- 진료 기록 데이터 (증상, 진단, 처방, 메모)

---

## 🎯 데모 시나리오 (단계별)

### **Phase 1: 시스템 소개 및 아키텍처 설명** (2-3분)

#### 1.1 시스템 개요 설명

```
💡 말할 내용:
- 의료기록의 보안성과 프라이버시 보호의 중요성
- 블록체인 + IPFS 하이브리드 아키텍처의 장점
- 암호화 기법 (AES-256-GCM + RSA-OAEP)
```

#### 1.2 화면 구성 소개

- **Home 페이지**: 역할 확인 및 기본 정보
- **Encrypted Medical**: 암호화 의료기록 관리
- **Key Generation**: RSA 키 생성 및 등록
- **Key Recovery**: 키 복구 시스템

---

### **Phase 2: 의사 역할 - 키 등록 및 환자 등록** (5-6분)

#### 2.1 의사 키 생성 및 등록

1. **의사 계정으로 MetaMask 연결**

   - MetaMask에서 첫 번째 계정 선택 (배포자)
   - 네트워크 확인: Localhost 8545

2. **RSA 키 쌍 생성**

   - "Key Generation" 페이지로 이동
   - "키 생성하기" 버튼 클릭
   - ✅ **데모 포인트**: RSA-OAEP 2048비트 키 쌍 생성 설명

3. **공개키 블록체인 등록**
   - "공개키 등록" 버튼 클릭
   - MetaMask 트랜잭션 승인
   - ✅ **데모 포인트**: 공개키가 블록체인에 저장되는 것 시연

#### 2.2 환자 등록 (신규 환자)

1. **환자 계정 변경**

   - MetaMask에서 환자 계정으로 전환 (예: Account 3)
   - 환자 계정에서도 RSA 키 생성 및 등록

2. **의사 계정으로 돌아가기**

   - 의사 계정으로 다시 전환
   - "Encrypted Medical" 또는 "Patient Lookup" 페이지로 이동

3. **환자 기본 정보 등록**
   - 환자 주소 입력
   - 기본 정보 입력:
     - 이름: "홍길동"
     - 키: 175cm
     - 몸무게: 70kg
     - 혈액형: "A"
     - 주민번호: "123456-1234567"
4. **IPFS 업로드 및 블록체인 저장**
   - "환자 등록" 또는 "기록 추가" 버튼 클릭
   - ✅ **데모 포인트**:
     - 암호화된 데이터가 IPFS에 업로드되는 과정
     - CID와 Hash만 블록체인에 저장되는 것 확인
     - 브라우저 콘솔에서 IPFS 업로드 로그 확인

---

### **Phase 3: 의료기록 추가** (3-4분)

#### 3.1 진료기록 작성

1. **의료기록 정보 입력**

   - 증상: "두통, 발열, 인후통"
   - 진단: "감기"
   - 처방: "해열제, 진통제, 충분한 휴식"
   - 메모: "3일 후 재방문 권장"

2. **암호화 및 IPFS 업로드**
   - "기록 추가" 버튼 클릭
   - MetaMask 트랜잭션 승인
   - ✅ **데모 포인트**:
     - 데이터가 AES로 암호화되고 IPFS에 업로드됨
     - 블록체인에는 CID와 Hash만 저장
     - 가스비 절감 효과 설명

---

### **Phase 4: 의료기록 조회** (3-4분)

#### 4.1 의사가 기록 조회

1. **의사 계정에서 기록 조회**

   - 환자 주소로 기록 검색
   - input ID로 기록 선택

2. **IPFS에서 데이터 조회 및 복호화**
   - ✅ **데모 포인트**:
     - 블록체인에서 CID 조회
     - IPFS Gateway에서 암호화된 데이터 다운로드
     - 무결성 검증 (Hash 비교)
     - RSA 개인키로 복호화하여 의료기록 표시

#### 4.2 환자가 자신의 기록 조회

1. **환자 계정으로 전환**

   - MetaMask에서 환자 계정으로 전환
   - "My Medical Records" 페이지로 이동

2. **기록 조회**
   - 등록된 기록 목록 확인
   - 기록 클릭하여 상세 정보 확인
   - ✅ **데모 포인트**: 환자도 자신의 의료기록을 볼 수 있지만, 의사 키와 다른 키로 복호화됨

---

### **Phase 5: 키 복구 시스템** (선택사항, 3-4분)

#### 5.1 보호자(Guardian) 설정

1. **보호자 계정 준비**

   - Hardhat 노드의 다른 계정들을 보호자로 사용

2. **SSS 조각 생성 및 분배**
   - "Key Recovery" 페이지로 이동
   - 보호자 정보 입력 (주소, 이름, 연락처)
   - ✅ **데모 포인트**: Shamir's Secret Sharing으로 개인키를 조각으로 분할

#### 5.2 키 복구 프로세스

1. **복구 요청**

   - 환자가 키 복구 요청
   - 블록체인에 복구 요청 트랜잭션

2. **보호자 승인**

   - 보호자 계정으로 전환
   - 복구 요청 확인 및 조각 제출

3. **키 복구 완료**
   - ✅ **데모 포인트**: 충분한 조각이 모이면 원래 키 복구

---

## 📊 데모 중 강조할 핵심 포인트

### 1. **아키텍처**

- ✅ **IPFS 분산 저장**: 가스비 절감, 확장성
- ✅ **블록체인 무결성 검증**: Hash 비교를 통한 데이터 변조 감지
- ✅ **하이브리드 암호화**: AES (속도) + RSA (안전한 키 전달)

### 2. **보안성**

- ✅ **End-to-End 암호화**: 의사와 환자만 복호화 가능
- ✅ **접근 제어**: 블록체인 기반 권한 관리
- ✅ **무결성 검증**: SHA-256 해시를 통한 데이터 변조 방지

### 3. **사용자 경험**

- ✅ **간단한 UI**: 의사와 환자 모두 쉽게 사용 가능
- ✅ **투명성**: 모든 트랜잭션이 블록체인에 기록됨

### 4. **비용 효율성**

- ✅ **IPFS 활용**: 대용량 데이터를 IPFS에 저장하여 가스비 절감
- ✅ **CID만 저장**: 블록체인에는 메타데이터만 저장

---

## ⚠️ 데모 시 주의사항

### 1. **트랜잭션 대기 시간**

- Hardhat 로컬 네트워크는 빠르지만, MetaMask 승인 시간 고려
- 트랜잭션 완료 메시지 확인 후 다음 단계 진행

### 2. **에러 처리**

- IPFS 업로드 실패 시: Pinata 연결 상태 확인
- 블록체인 트랜잭션 실패 시: 가스비 및 컨트랙트 주소 확인

### 3. **브라우저 콘솔 활용**

- 개발자 도구 콘솔을 열어두고 로그 확인
- IPFS 업로드/다운로드 과정을 시각적으로 보여줌

### 4. **백업 플랜**

- 주요 기능이 실패할 경우를 대비한 대안 설명 준비
- 스크린샷 또는 녹화 영상 준비 (선택사항)

---

## 🎬 데모 종료 및 Q&A

### 마무리 포인트

1. **시스템 요약**

   - 블록체인 + IPFS 하이브리드 아키텍처
   - 강력한 암호화 및 접근 제어
   - 확장 가능한 구조

2. **향후 개선 방향**

   - 실제 메인넷 배포
   - 추가 보안 기능 (다중 서명 등)
   - 모바일 앱 개발

3. **Q&A 준비**
   - 가스비 절감 효과 수치
   - IPFS 핀닝 서비스 비용
   - 확장성 및 성능 관련 질문

---

## 📝 체크리스트

데모 전 확인:

- [ ] Hardhat 노드 실행 중
- [ ] 프론트엔드 실행 중
- [ ] MetaMask 연결 및 네트워크 설정
- [ ] Pinata JWT 토큰 설정 확인
- [ ] 의사 계정으로 키 등록积极
- [ ] 환경 변수 올바르게 설정됨
- [ ] 브라우저 콘솔 열어두기
- [ ] 테스트 계정 준비

데모 중:

- [ ] 각 단계별 예상 시간 준수
- [ ] 주요 포인트 강조
- [ ] 기술적 세부사항 설명
- [ ] 에러 발생 시 유연하게 대응

---

## 📸 데모 스크린샷 추천

데모 중 다음 화면들을 캡처하면 좋습니다:

1. 키 생성 화면 (RSA 키 쌍 생성)
2. IPFS 업로드 로그 (CID 생성)
3. 블록체인 트랜잭션 (CID와 Hash 저장)
4. 의료기록 조회 화면 (복호화된 데이터)
5. 블록체인 탐색기 (선택사항: Etherscan 형식)

---

**데모 준비 완료! 행운을 빕니다! 🚀**
